document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll(".car-category"),a=document.querySelectorAll(".grid .car-card"),n=document.getElementById("fuelFilter"),l=document.getElementById("gearboxFilter"),o=document.getElementById("priceRange"),r=document.querySelector(".price-label"),s=document.getElementById("loadMoreCars"),m=12;var e,c,u;function f(e){e=(e||"").toLowerCase().trim();return["auto","automatic","automat","automatika"].includes(e)?"automatic":["manual","man","rucni","ruÄni"].includes(e)?"manual":e}function i(e=!1){e&&(m=12);e=document.querySelector(".car-category.active");let r=e?e.textContent.toLowerCase().trim():"all",c=(n?.value||"").toLowerCase().trim(),u=f(l?.value||""),i=o&&""!==o.value?parseFloat(o.value):null,d=[];a.forEach(function(e){var t=(e.dataset.type||"").toLowerCase().trim(),a=(e.dataset.fuel||"").toLowerCase().trim(),n=f(e.dataset.gearbox||"");let l=e.dataset.price||null,o=(null!==l&&(l=parseFloat(String(l).replace(/[^\d.]/g,""))),!0);"all"!==r&&""!==r&&t!==r&&(o=!1),c&&a!==c&&(o=!1),u&&n!==u&&(o=!1),(o=null!==i&&(null===l||l>i)?!1:o)&&d.push(e)}),a.forEach(function(e){e.style.display="none"}),d.slice(0,m).forEach(function(e){e.style.display=""}),s&&(d.length>m?s.style.display="":s.style.display="none")}function d(){var e,t;o&&r&&(t=((e=parseFloat(o.value)||0)-(t=parseFloat(o.min)||0))/((parseFloat(o.max)||100)-t)*100,o.style.setProperty("--val",t),r.textContent="Max. $"+e.toFixed(2),i(!0))}a.length&&(t.length&&t.forEach(function(e){e.addEventListener("click",function(){t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),i(!0)})}),[n,l].forEach(function(e){e&&e.addEventListener("change",function(){i(!0)})}),o&&o.addEventListener("input",d),s&&s.addEventListener("click",function(){m+=12,i(!1)}),d(),e=document.getElementById("gform_2"))&&(c=document.getElementById("input_11"),u=document.getElementById("input_12"),c)&&u&&e.addEventListener("submit",function(e){var t=c.value.trim(),a=u.value.trim();t&&a&&(t=new Date(t),new Date(a)<t)&&(e.preventDefault(),alert("End date cannot be earlier than start date."),u.value="",u.focus())})});