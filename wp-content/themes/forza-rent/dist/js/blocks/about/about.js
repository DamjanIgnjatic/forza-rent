document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll(".car-category"),a=document.querySelectorAll(".grid .car-card"),n=document.getElementById("fuelFilter"),l=document.getElementById("gearboxFilter"),r=document.getElementById("priceRange"),o=document.querySelector(".price-label"),s=!1,m=document.getElementById("loadMoreCars"),f=12;var e,c,u;function y(e){e=(e||"").toLowerCase().trim();return["auto","automatic","automat","automatika"].includes(e)?"automatic":["manual","man","rucni","ručni"].includes(e)?"manual":e}function i(e=!1){e&&(f=12);e=document.querySelector(".car-category.active");let o=e?e.dataset.filter:"all",c=(n?.value||"").toLowerCase().trim(),u=y(l?.value||""),i=r&&""!==r.value?parseFloat(r.value):null,d=[];a.forEach(function(e){(e.dataset.type||"").toLowerCase().trim();var t=(e.dataset.fuel||"").toLowerCase().trim(),a=y(e.dataset.gearbox||"");let n=e.dataset.price||null;var l=(e.dataset.category||"").toLowerCase().trim();null!==n&&(n=parseFloat(String(n).replace(/[^\d.]/g,"")));let r=!0;"all"!==o&&""!==o&&l!==o&&(r=!1),c&&t!==c&&(r=!1),u&&a!==u&&(r=!1),(r=s&&null!==i&&n>i?!1:r)&&d.push(e)}),a.forEach(function(e){e.style.display="none"}),d.slice(0,f).forEach(function(e){e.style.display=""}),m&&(d.length>f?m.style.display="":m.style.display="none")}function d(){var e,t,a;r&&o&&(a=parseFloat(r.value),e=parseFloat(r.min),t=parseFloat(r.max),o.textContent=`Price: €${a}/day`,a=(a-e)/(t-e)*100,r.style.setProperty("--val",a),i(!0))}a.length&&(t.length&&t.forEach(function(e){e.addEventListener("click",function(){t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),i(!0)})}),[n,l].forEach(function(e){e&&e.addEventListener("change",function(){i(!0)})}),r&&r.addEventListener("input",()=>{s=!0,d()}),m&&m.addEventListener("click",function(){f+=12,i(!1)}),setTimeout(d,30),d(),e=document.getElementById("gform_2"))&&(c=document.getElementById("input_11"),u=document.getElementById("input_12"),c)&&u&&e.addEventListener("submit",function(e){var t=c.value.trim(),a=u.value.trim();t&&a&&(t=new Date(t),new Date(a)<t)&&(e.preventDefault(),alert("End date cannot be earlier than start date."),u.value="",u.focus())})});