document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll(".car-category"),a=document.querySelectorAll(".grid .car-card"),n=document.getElementById("fuelFilter"),l=document.getElementById("gearboxFilter"),o=document.getElementById("priceRange"),r=document.querySelector(".price-label"),s=document.getElementById("loadMoreCars"),m=12;function f(e){e=(e||"").toLowerCase().trim();return["auto","automatic","automat","automatika"].includes(e)?"automatic":["manual","man","rucni","ruÄni"].includes(e)?"manual":e}function c(e=!1){e&&(m=12);e=document.querySelector(".car-category.active");let r=e?e.textContent.toLowerCase().trim():"all",c=(n?.value||"").toLowerCase().trim(),i=f(l?.value||""),u=o&&""!==o.value?parseFloat(o.value):null,d=[];a.forEach(function(e){var t=(e.dataset.type||"").toLowerCase().trim(),a=(e.dataset.fuel||"").toLowerCase().trim(),n=f(e.dataset.gearbox||"");let l=e.dataset.price||null,o=(null!==l&&(l=parseFloat(String(l).replace(/[^\d.]/g,""))),!0);"all"!==r&&""!==r&&t!==r&&(o=!1),c&&a!==c&&(o=!1),i&&n!==i&&(o=!1),(o=null!==u&&(null===l||l>u)?!1:o)&&d.push(e)}),a.forEach(function(e){e.style.display="none"}),d.slice(0,m).forEach(function(e){e.style.display=""}),s&&(d.length>m?s.style.display="":s.style.display="none")}function e(){var e,t;o&&r&&(t=((e=parseFloat(o.value)||0)-(t=parseFloat(o.min)||0))/((parseFloat(o.max)||100)-t)*100,o.style.setProperty("--val",t),r.textContent="Max. $"+e.toFixed(2),c(!0))}a.length&&(t.length&&t.forEach(function(e){e.addEventListener("click",function(){t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),c(!0)})}),[n,l].forEach(function(e){e&&e.addEventListener("change",function(){c(!0)})}),o&&o.addEventListener("input",e),s&&s.addEventListener("click",function(){m+=12,c(!1)}),e())});