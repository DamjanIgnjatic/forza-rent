document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll(".grid .car-card"),a=document.querySelector(".no-results"),n=document.getElementById("category"),l=document.getElementById("yearFilter"),r=document.getElementById("gearboxFilter"),s=document.getElementById("priceRange"),o=document.querySelector(".price-label"),m=document.getElementById("loadMoreCars"),y=12,g=!1;var e,u,d;function v(e){e=(e||"").toLowerCase().trim();return["auto","automatic","automat","automatika"].includes(e)?"automatic":["manual","man","rucni","ručni"].includes(e)?"manual":e}function i(e=!1){e&&(y=12);let o=(n?.value||"").toLowerCase().trim(),u=(l?.value||"").trim(),d=v(r?.value||""),i=s&&""!==s.value?parseFloat(s.value):null,c=[];t.forEach(function(e){var t=(e.dataset.category||"").toLowerCase().trim(),a=(e.dataset.year||"").trim(),n=v(e.dataset.gearbox||"");let l=e.dataset.price||null,r=(null!==l&&(l=parseFloat(String(l).replace(/[^\d.]/g,""))),!0);o&&t!==o&&(r=!1),u&&a!==u&&(r=!1),d&&n!==d&&(r=!1),(r=g&&null!==i&&l>i?!1:r)&&c.push(e)}),t.forEach(e=>e.style.display="none"),c.slice(0,y).forEach(e=>{e.style.display=""}),a&&(0===c.length?a.style.display="block":a.style.display="none"),m&&(m.style.display=c.length>y?"":"none")}function c(){var e,t,a;s&&o&&(a=parseFloat(s.value),e=parseFloat(s.min),t=parseFloat(s.max),o.textContent=`Price: €${a}/day`,a=(a-e)/(t-e)*100,s.style.setProperty("--val",a),i(!0))}t.length&&(n&&n.addEventListener("change",()=>i(!0)),l&&l.addEventListener("change",()=>i(!0)),r&&r.addEventListener("change",()=>i(!0)),s&&s.addEventListener("input",()=>{g=!0,c()}),m&&m.addEventListener("click",function(){y+=12,i(!1)}),setTimeout(c,30),c(),e=document.getElementById("gform_2"))&&(u=document.getElementById("input_11"),d=document.getElementById("input_12"),u)&&d&&e.addEventListener("submit",function(e){var t=u.value.trim(),a=d.value.trim();t&&a&&(t=new Date(t),new Date(a)<t)&&(e.preventDefault(),alert("End date cannot be earlier than start date."),d.value="",d.focus())})});