document.addEventListener("DOMContentLoaded",function(){let t=document.querySelectorAll(".car-category"),a=document.querySelectorAll(".grid .car-card"),n=document.getElementById("fuelFilter"),l=document.getElementById("gearboxFilter"),o=document.getElementById("priceRange"),r=document.querySelector(".price-label"),s=!1,m=document.getElementById("loadMoreCars"),y=12;function f(e){e=(e||"").toLowerCase().trim();return["auto","automatic","automat","automatika"].includes(e)?"automatic":["manual","man","rucni","ručni"].includes(e)?"manual":e}function c(e=!1){e&&(y=12);e=document.querySelector(".car-category.active");let r=e?e.dataset.filter:"all",c=(n?.value||"").toLowerCase().trim(),i=f(l?.value||""),u=o&&""!==o.value?parseFloat(o.value):null,d=[];a.forEach(function(e){(e.dataset.type||"").toLowerCase().trim();var t=(e.dataset.fuel||"").toLowerCase().trim(),a=f(e.dataset.gearbox||"");let n=e.dataset.price||null;var l=(e.dataset.category||"").toLowerCase().trim();null!==n&&(n=parseFloat(String(n).replace(/[^\d.]/g,"")));let o=!0;"all"!==r&&""!==r&&l!==r&&(o=!1),c&&t!==c&&(o=!1),i&&a!==i&&(o=!1),(o=s&&null!==u&&n>u?!1:o)&&d.push(e)}),a.forEach(function(e){e.style.display="none"}),d.slice(0,y).forEach(function(e){e.style.display=""}),m&&(d.length>y?m.style.display="":m.style.display="none")}function e(){var e,t,a;o&&r&&(a=parseFloat(o.value),e=parseFloat(o.min),t=parseFloat(o.max),r.textContent=`Price: €${a}/day`,a=(a-e)/(t-e)*100,o.style.setProperty("--val",a),c(!0))}a.length&&(t.length&&t.forEach(function(e){e.addEventListener("click",function(){t.forEach(function(e){e.classList.remove("active")}),e.classList.add("active"),c(!0)})}),[n,l].forEach(function(e){e&&e.addEventListener("change",function(){c(!0)})}),o&&o.addEventListener("input",()=>{s=!0,e()}),m&&m.addEventListener("click",function(){y+=12,c(!1)}),setTimeout(e,30))});